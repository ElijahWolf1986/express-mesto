(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{11:function(e,t,a){e.exports=a(17)},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(5),c=a.n(r),s=(a(16),a(10)),i=a(1),l=a(6),u=a.n(l);var p=function(){return o.a.createElement("header",{className:"header"},o.a.createElement("img",{src:u.a,alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f_\u0441\u0430\u0439\u0442\u0430",className:"header__logo"}))},m=a(7),d=a.n(m),h=o.a.createContext();var _=function(e){var t=o.a.useContext(h),a=e.card,n=a.owner._id===t._id,r="card__trash ".concat(n&&"card__trash_type_visible"),c=a.likes.some((function(e){return e._id===t._id})),s="card__like ".concat(c&&"card__like_state_active");return o.a.createElement("div",{className:"card"},o.a.createElement("button",{className:r,onClick:function(){e.onCardDelete(a)}}),o.a.createElement("img",{src:a.link,alt:a.name,className:"card__img",onClick:function(){e.onCardClick(a)}}),o.a.createElement("div",{className:"card__place"},o.a.createElement("h3",{className:"card__title"},a.name),o.a.createElement("div",{className:"card__like_group"},o.a.createElement("button",{type:"button",title:"",className:s,onClick:function(){e.onCardLike(a)}}),o.a.createElement("p",{className:"card__like_counter"},a.likes.length))))};var f=function(e){var t=o.a.useContext(h);return o.a.createElement("main",{className:"content"},o.a.createElement("section",{className:"profile"},o.a.createElement("div",{className:"profile__wrapper"},o.a.createElement("div",{className:"profile__edit",onClick:e.onEditAvatar},o.a.createElement("img",{src:t.avatar||d.a,alt:"\u0430\u0432\u0430\u0442\u0430\u0440",className:"profile__avatar"})),o.a.createElement("div",{className:"profile__data-container"},o.a.createElement("div",{className:"profile__info"},o.a.createElement("h1",{className:"profile__info-title"},t.name),o.a.createElement("button",{type:"button",onClick:e.onEditProfile,className:"profile__info-edit-button"})),o.a.createElement("p",{className:"profile__info-subtitle"},t.about))),o.a.createElement("button",{type:"button",onClick:e.onAddPlace,className:"profile__add-button"})),o.a.createElement("section",{className:"gallery"},e.cards.map((function(t,a){return o.a.createElement(_,{card:t,key:a,onCardClick:e.selectedCard,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete})}))))};var A=function(){return o.a.createElement("section",{className:"footer"},o.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Mesto Russia"))};var v=function(e){var t=e.card;return o.a.createElement("section",{id:"popup-view",className:"popup ".concat(t&&"popup_state_opened")},o.a.createElement("div",{className:"popup__overlay",onClick:e.onClose}," "),o.a.createElement("div",{className:"popup__container-view"},o.a.createElement("button",{type:"button",name:"closePlace",className:"popup__close-icon",onClick:e.onClose}),o.a.createElement("img",{src:t?t.link:"#",alt:t?t.name:"none",className:"popup__img-view"}),o.a.createElement("h2",{className:"popup__title-view"},t?t.name:"")))};var E=function(e){return o.a.createElement("section",{id:e.id,className:"popup ".concat(e.isOpen&&"popup_state_opened")},o.a.createElement("div",{className:"popup__overlay",onClick:e.onClose}," "),o.a.createElement("div",{className:"popup__container"},o.a.createElement("button",{type:"button",className:"popup__close-icon",onClick:e.onClose}),o.a.createElement("form",{name:e.name,onSubmit:e.onSubmit,method:"POST",className:"popup__form",noValidate:!0},o.a.createElement("h2",{className:"popup__title"},e.title),e.children)))};var N=function(e){var t=o.a.useContext(h),a=o.a.useState(""),n=Object(i.a)(a,2),r=n[0],c=n[1],s=o.a.useState(""),l=Object(i.a)(s,2),u=l[0],p=l[1];return o.a.useEffect((function(){c(t.name),p(t.about)}),[t]),o.a.createElement(E,{id:"popup-author",name:"popup_author_form",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:r,about:u})}},o.a.createElement("fieldset",{className:"popup__form-author-info"},o.a.createElement("input",{id:"author-input",type:"text",value:r||"",onChange:function(e){c(e.target.value)},name:"author",minLength:"2",maxLength:"40",required:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",className:"popup__input"}),o.a.createElement("span",{id:"author-input-error",className:"popup__error_visible"}),o.a.createElement("input",{id:"metier-input",type:"text",value:u||"",onChange:function(e){p(e.target.value)},name:"metier",minLength:"2",maxLength:"200",required:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0440\u043e\u0434 \u0437\u0430\u043d\u044f\u0442\u0438\u0439",className:"popup__input"}),o.a.createElement("span",{id:"metier-input-error",className:"popup__error_visible"})),o.a.createElement("button",{type:"submit",className:"popup__button-save"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))};var b=function(e){var t=o.a.useRef(null);return o.a.useEffect((function(){t.current.value=""}),[e.isOpen]),o.a.createElement(E,{id:"popup-avatar",name:"popup_avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0430\u0432\u0430\u0442\u0430\u0440",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(a){a.preventDefault(),e.onUpdateAvatar({avatar:t.current.value})}},o.a.createElement("fieldset",{className:"popup__form-author-info"},o.a.createElement("input",{id:"url-input",type:"url",ref:t,name:"url",required:!0,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",className:"popup__input"}),o.a.createElement("span",{id:"url-input-error",className:"popup__error_visible"})),o.a.createElement("button",{type:"submit",className:"popup__button-save"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))};var C=function(e){var t=o.a.useState(""),a=Object(i.a)(t,2),n=a[0],r=a[1],c=o.a.useState(""),s=Object(i.a)(c,2),l=s[0],u=s[1];return o.a.createElement(E,{id:"popup-place",name:"popup_place_form",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onAddPlace({name:n,link:l})}},o.a.createElement("fieldset",{className:"popup__form-author-info"},o.a.createElement("input",{id:"place-input",type:"text",value:n||"",onChange:function(e){r(e.target.value)},name:"place",minLength:"1",maxLength:"30",required:!0,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",className:"popup__input"}),o.a.createElement("span",{id:"place-input-error",className:"popup__error_visible"}),o.a.createElement("input",{id:"url-input",type:"url",value:l||"",onChange:function(e){u(e.target.value)},name:"url",required:!0,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"popup__input"}),o.a.createElement("span",{id:"url-input-error",className:"popup__error_visible"})),o.a.createElement("button",{type:"submit",className:"popup__button-save"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))},k=a(8),g=a(9),y={url:"https://mesto.nomoreparties.co/v1/cohort-13",headers:{Authorization:"54672975-eeab-4137-bd8f-7cd077a45ce9","Content-Type":"application/json"}},O=new(function(){function e(t){var a=t.url,n=t.headers,o=void 0===n?{}:n;Object(k.a)(this,e),this._url=a,this._headers=o}return Object(g.a)(e,[{key:"_handleResponse",value:function(e){return e.ok?e.json():(console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443"),Promise.reject(e.statusText))}},{key:"_handleResponseError",value:function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443"),Promise.reject(e.message)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._url,"/cards"),{headers:this._headers}).then(this._handleResponse).catch(this._handleResponseError)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then(this._handleResponse).catch(this._handleResponseError)}},{key:"setUserInfo",value:function(e){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:"".concat(e.name),about:"".concat(e.about)})}).then(this._handleResponse).catch(this._handleResponseError)}},{key:"setNewCard",value:function(e){return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:"".concat(e.name),link:"".concat(e.link)})}).then(this._handleResponse).catch(this._handleResponseError)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._handleResponse).catch(this._handleResponseError)}},{key:"setLike",value:function(e){return fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(this._handleResponse).catch(this._handleResponseError)}},{key:"delLike",value:function(e){return fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(this._handleResponse).catch(this._handleResponseError)}},{key:"setAvatar",value:function(e){return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:"".concat(e.avatar)})}).then(this._handleResponse).catch(this._handleResponseError)}}]),e}())(y);var R=function(){var e=o.a.useState(!1),t=Object(i.a)(e,2),a=t[0],n=t[1],r=o.a.useState(!1),c=Object(i.a)(r,2),l=c[0],u=c[1],m=o.a.useState(!1),d=Object(i.a)(m,2),_=d[0],E=d[1],k=o.a.useState(),g=Object(i.a)(k,2),y=g[0],R=g[1],S=o.a.useState({}),j=Object(i.a)(S,2),I=j[0],L=j[1],w=o.a.useState([]),U=Object(i.a)(w,2),x=U[0],G=U[1];function K(){E(!1),u(!1),n(!1),R(void 0)}return o.a.useEffect((function(){O.getInitialCards().then((function(e){G(e)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445... ".concat(e))}))}),[]),o.a.useEffect((function(){O.getUserInfo().then((function(e){L(e)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435... ".concat(e))}))}),[]),o.a.createElement("div",{className:"page"},o.a.createElement(h.Provider,{value:I},o.a.createElement(p,null),o.a.createElement(f,{onEditAvatar:function(){E(!0)},onEditProfile:function(){n(!0)},onAddPlace:function(){u(!0)},selectedCard:function(e){R(e)},cards:x,onCardLike:function(e){e.likes.some((function(e){return e._id===I._id}))?O.delLike(e._id).then((function(t){var a=x.map((function(a){return a._id===e._id?t:a}));G(a)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043b\u0430\u0439\u043a\u0430... ".concat(e))})):O.setLike(e._id).then((function(t){var a=x.map((function(a){return a._id===e._id?t:a}));G(a)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043b\u0430\u0439\u043a\u0430... ".concat(e))}))},onCardDelete:function(e){O.deleteCard(e._id).then((function(){var t=x.filter((function(t){return t._id!==e._id}));G(t)}))}}),o.a.createElement(N,{isOpen:a,onClose:K,onUpdateUser:function(e){O.setUserInfo(e).then((function(e){L(e),K()}))}}),o.a.createElement(C,{isOpen:l,onClose:K,onAddPlace:function(e){O.setNewCard(e).then((function(e){G([].concat(Object(s.a)(x),[e])),K()}))}}),o.a.createElement(b,{isOpen:_,onClose:K,onUpdateAvatar:function(e){O.setAvatar(e).then((function(e){L(e),K()}))}}),o.a.createElement(v,{card:y,onClose:K}),o.a.createElement(A,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t,a){e.exports=a.p+"static/media/logo.c6f11019.svg"},7:function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5Ojf/wAALCAB+AH4BAREA/8QAGwAAAgIDAQAAAAAAAAAAAAAAAAIBAwQFBgf/xAAyEAACAQMCBAMGBQUAAAAAAAAAAQIDBBEFIRITMUEGYZEUIkJRUqEjMmJywTNTcbHh/9oACAEBAAA/AOtAlEkpBgnBOAwQ0GCCGQQAEolIZIlIic6dNZqzjBPvKSRrbrXrSjLhpKVZrZuOy9e5jrxHHmb2z4P3bmRT1+0lUUXGaTW0sdPJmdC8tanDwV4NyWVHO/oXYIaFaIIIJJSGSGSG2Sbk0kt232ON1a99tvJzi3yltBP5GEAExk4yzF4Z1Oh6jG6hyKkpc6C+LG68tjatCtCNEYIJRKHSHSNT4mrujYRpReHWlh/tXX+DlQAAM3Rq3J1OhL3cOXD73mdq0I0I0KxWSh0h0h0jnvFyw7V+UtvQ54AACYrMkvM9CjFRjFLol3FYkkI0KyUOh0WJGi8XRXItp91Nr7f8OYAAAuso8V7bx+dSP+z0GSK2IytismI6HRZE57xdcS/AtuBcP9Xi753WDmwAAHoVZUK0K0McUHxLi6HocZcynGeMcUU8fIViSK5CMmI8SxFkTSeLaKlZUayj70KnDnyaf8pHKAAAW2tLnXNGl9c4x9WeiNJLCWEVyK5FchQiPEsRZES7t43dpVt5vCnHGfl8mcPqdhPTrlUKk4zbipKUehiAAG/8MaY61WN9OSUKU2lHH5njr9zqZFbEkVyFIQ6HRYmWRNN4osFcWvtcHidBbp/FE5AALbWj7RdUaGeHm1Iwzjpl4PQLehTtbeFCisQgsLz8xmVsRiSYjBDJjpjplkWYurvOlXaf9qRwYAZGn1FSv7apJpRhVhJt9kmsnfqalFSi1KLWzXcVsRsSTK2KwQyHTJlOMIuU5KMV1cnhGrr+I7SnNxpwqVcfFHCT9TUanrVe+i6cVyqL6xT3l/lmrAAMuz1G7s9qFaSj9D3j6G0oeJZpYuLdS86bx9mbG31qyuGoqo6cn2qLH36Ga3lZXQVishdDDudVtLdNOoqk18MN/v0NNda3d1m1SfJh+nr6muqVKlR5qTlN/qeRQAAAAAvt7y4tscitKKXbOV6M2dvr9RbXNJSX1Q2ZtKGo2laOY1op94zfC16nM3F5c3OedVk19K2XoY4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH//2Q=="}},[[11,1,2]]]);
//# sourceMappingURL=main.354e65ae.chunk.js.map